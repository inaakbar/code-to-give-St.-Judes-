<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Life skills Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="style/style.css"/>-->
    <!--<link rel="stylesheet" href="style/user.css"/>-->
    <link rel="stylesheet" href="/public/style/style.css" />
    <link rel="stylesheet" href="/public/style/user.css" />

    <!-- <link rel="stylesheet" href="/public/style/style2.css"> -->
  </head>
  <script type="text/javascript" src="multilang.js"></script>
  <script type="text/javascript" src="language-change.js"></script>
  <script type="text/javascript">
    var multilang;
    var item = localStorage.getItem("global_lang")
    //if(item)
    //localStorage.setItem('global_lang', "en");
    function onLoad() {
      console.log("lang selected", item)
      // create object, load JSON file, default to 'nl', and callback to initList when ready loading
      multilang = new MultiLang('languages.json', item, this.initList);

      // alternatively
      //multilang = new MultiLang('languages.json', null, this.initList); // default to browser language
      //multilang = new MultiLang('languages.json'); // only load JSON, no callback
    }
    function langSelectChange(sel) {
      // console.log(document.getElementById("lang").value);
      // switch to selected language code
      // global_lang=sel.value;
      //console.log("Global_variable=", global_lang)
      localStorage.setItem('global_lang', sel.value);
      multilang.setLanguage(sel.value);
      item = localStorage.getItem("global_lang")
      console.log(item)
      // initList()
      // refresh labels
      // multilang = new MultiLang('languages.json', item, this.initList);
      refreshLabels();
      //changelist()
    }

    function initList() {
      // get language list element
      var list = document.getElementsByName("listlanguages")[0];
      // clear all options
      list.options.length = 0;
      item = localStorage.getItem("global_lang")
      var cnt = 1;
      // add all available languages
      for (var key in multilang.phrases) {
        // create new language option
        var lang = document.createElement("option");
        lang.value = key;
        lang.innerHTML = multilang.phrases[key]['langdesc'];
        console.log("lang", item)
        console.log(cnt)
        // if (item == "hn" && cnt == 1)
        //   lang.innerHTML = "अंग्रेज़ी";
        // if (item == "hn" && cnt == 2)
        //   lang.innerHTML = "हिन्दी";
        cnt = cnt + 1;
        // append to select element
        list.appendChild(lang);
      }

      // refreshLabels();
    }
    function changelist() {
      console.log("hello");
      var list1 = document.getElementsById("list");
      for (var val in list.length) {
        console.log(val.options.value);
      }
    }

    function refreshLabels() {

      // Basically do the following for all document elements:
      //document.getElementById("Options").textContent = multilang.get("Options");

      // loop through all document elements
      var allnodes = document.body.getElementsByTagName("*");

      for (var i = 0, max = allnodes.length; i < max; i++) {
        // get id current elements
        var idname = allnodes[i].id;
        // if id exists, set get id current elements
        if (idname != '' && idname != 'contactUs' && idname != "toggleMobileMenu" && idname != "userTable") {
          allnodes[i].textContent = multilang.get(idname);
        };
      };
    }
  </script>

  <body id="userDashboard" onload="onLoad()">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <form action="" method="post">
          <button type="submit" name="contactUs" formaction="/" class="btn btn-outline-light btn-lg nav-btn">
            <img src="/public/logo-removebg.png" alt="logo" width="45" height="45" class="d-inline-block align-top" />
            <span id="user-dashboard" class="logoSpan">User Dashboard</span>
          </button>
        </form>
        <button class="navbar-toggler nav-btn" type="button" data-bs-toggle="collapse"
          data-bs-target="#toggleMobileMenu" aria-controls="toggleMobileMenu" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="toggleMobileMenu">
          <form action="">
            <ul class="navbar-nav ms-auto text-center">
              <li class="nav-item">
                <!-- <a href="home.ejs" class="nav-link active">About Us</a> -->
                <button type="submit" name="home" formaction="/userdash" formmethod="get"
                  class="btn btn-outline-light nav-btn" id="home">
                  Home
                </button>
              </li>
              <!-- <li class="nav-item">
                    <button type="submit" name="contactUs" formaction="/"
                        class="btn btn-outline-light nav-btn"
                    >
                        Contact Us
                    </button>
                  </li> -->
              <li class="nav-item dropdown">
              <li class="nav-item">
                <button type="submit" name="contactUs" formaction="/" class="btn btn-outline-light nav-btn" id="logout">
                  Logout
                </button>
              </li>
              <li class="nav-item dropdown">
                <select style="padding: 10px; background-color:white; border:none;" name="listlanguages"
                  onchange="langSelectChange(this)">
                </select>
          </form>
          </li>
          </ul>
        </div>
      </div>
    </nav>
    <h2 id="req-form" class="text-center m-4">Request Forms Detail</h2>
    <div class="userContent text-center m-4">
      <form>
        <div class="RequestTable">
          <table class="table table-bordered" id="userTable">
            <thead>
              <tr>
                <th id="s.no" scope="col">S.no.</th>
                <th id="type" scope="col">Type</th>
                <th id="form-status" scope="col">Form Status</th>
                <th id="doc-status" scope="col">Document Status</th>
                <th id="amount" scope="col">Amount Needed (in Rs.)</th>
                <th id="final" scope="col">Final Status</th>
              </tr>
            </thead>

            <tbody>
                        <% var x=1 %>
                            <% formList.forEach(form=>{ %>
                                <tr>
                                    <td>
                                        <%= x++ %>
                                    </td>
                                    <td>
                                        <%= form.Needtype %>
                                    </td>
                                    <td>
                                        <%= form.Approval %>
                                    </td>
                                    <td>
                                        <%= form.Doc %>
                                    </td>
                                    <td>
                                        <%= form.Amountneeded %>
                                    </td>
                                    <td>
                                        <a class="btn btn-outline-dark" href="/userdash/documentupload/<%=form._id%>">
                                            Upload doc
                                        </a>
                                    </td>
                                </tr>
                                <% }); %>

                    </tbody>
          </table>
          <!-- <button class="btn btn-outline-dark">Hey</button> -->
        </div>

    </div>


    <!-- <button onclick="f3()">Next</button> -->
    <!--<script src="userRequestStatus.js"></script>-->
    <!-- <script src="/varun/script.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"></script>
  </body>

</html>